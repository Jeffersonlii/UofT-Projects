/******************************************************************************
 *                       CSCB63 Winter 2021
 *                  Assignment 1 - AVL Trees
 *                  (c) Mustafa Quraish, Jan. 2021
 *
 * This code imports and tests your solution to the assignment. This is
 * NOT comprehensive, passing these tests does not mean your program is
 * fully correct. You need to ensure this yourself. 
 * 
 * You are *strongly encouraged* to add more test cases here yourself to
 * verify the correctness of your code, and also share tricky edge cases
 * with others (but NOT your solution).
 * 
 * You can compile and run these tests as follows:
 *
 *  $> gcc testClosest.c -o testClosest
 *  $> ./testClosest [optional testname]  (or .\testClosest.exe if on Windows)
 * 
 *  For instance:
 *     ./testClosest basic_test    will run the first test case
 *     ./testClosest               will runn all the test cases
 *
 *****************************************************************************/

#include "unittest.h"
#include "assert.h"

#include "closest.c" // Imports your code

// Run with ./testClosest basic_test
TEST(basic_test)
{
  int a, b;
  AVLNode *root = NULL;
  root = insert(root, 100);
  root = insert(root, 200);

  // Test one, two values in the tree
  closestPair(root, &a, &b);
  assert(a == 100);
  assert(b == 200);
}

TEST(updated_pair)
{
  int a, b;
  AVLNode *root = NULL;
  root = insert(root, 100);
  root = insert(root, 200);
  root = insert(root, 140); // This is now closest to 100

  closestPair(root, &a, &b);
  assert(a == 100);
  assert(b == 140);
}

TEST(many_inserts)
{
  int a, b;
  int vals[] = {100, 200, 140, 130, 195, 154, 102, 155};
  AVLNode *root = NULL;
  for (int i = 0; i < 8; i++)
    root = insert(root, vals[i]);

  closestPair(root, &a, &b);
  assert(a == 154);
  assert(b == 155);
}

TEST(many_many_inserts)
{
    /*
  import random
  random.sample(range(1000), 50)
  */
  int a, b;
  int vals[] = {447, 415, 250, 930, 511, 240, 10, 330, 695, 820, 153, 412, 565, 604, 94, 784, 794, 809, 509, 989, 324, 185, 677, 455, 621, 841, 468, 431, 614, 52,
                364, 962, 849, 561, 733, 839, 216, 991, 214, 589, 312, 442, 269, 482, 691, 12, 31, 642, 610, 548};
  AVLNode *root = NULL;
  for (int i = 0; i < 50; i++)
    root = insert(root, vals[i]);

  closestPair(root, &a, &b);
  printf("%d\n", a);
  printf("%d\n", b);
  // assert(a == 154);
  // assert(b == 155);
}
TEST(many_many_many_inserts)
{

  /*
  import random
  random.sample(range(50000), 1000)
  */
  int a, b;
  int vals[] = {25654, 6489, 1580, 3094, 23741, 9780, 1980, 13874, 12348, 9711, 46083, 6018, 35896, 47645, 36797,
   5457, 40946, 35161, 29513, 28403, 9079, 26298, 48155, 20942, 4707, 39304, 7844, 33398, 7962, 49562, 14222, 29407, 
   9823, 23559, 17252, 21419, 18135, 15721, 28678, 45800, 44034, 24566, 15519, 40640, 1101, 9707, 21492, 19701, 39064,
    30754, 14614, 31409, 13434, 2119, 29027, 42619, 30725, 32752, 6722, 31464, 23818, 34108, 23646, 40974, 35000, 3050,
     39866, 31630, 36123, 30369, 17329, 24705, 22145, 32791, 47177, 41265, 12772, 18800, 18836, 24728, 6548, 35383, 37486,
      28168, 49910, 44956, 37772, 40192, 33269, 40607, 5675, 27937, 35483, 44496, 37550, 2047, 29260, 40948, 43970, 30242,
       16116, 3733, 4572, 27513, 17027, 44786, 25993, 37735, 45878, 16683, 49713, 46509, 45579, 24044, 45650, 24794, 42716,
        6014, 2029, 5550, 6826, 33815, 22767, 15469, 33808, 14449, 10291, 44153, 4859, 848, 14227, 14430, 25393, 36524, 42146, 
        42295, 8134, 5702, 26049, 214, 33768, 17399, 17603, 22843, 44560, 6560, 2622, 1108, 17315, 5335, 39007, 37840, 10575, 11856, 
        37440, 4047, 38779, 19832, 15981, 43301, 23427, 32499, 35822, 9971, 22513, 34666, 16815, 32045, 33172, 18792, 23263, 37285, 
        42441, 941, 34037, 31838, 24412, 17060, 11251, 42652, 27578, 26992, 41205, 4690, 49028, 19844, 47053, 29692, 11916, 34898, 11924, 
        6151, 2768, 49238, 33926, 1665, 33941, 47442, 1878, 16318, 3382, 19285, 31688, 15647, 12092, 41428, 26955, 26209, 35036, 34135, 25228, 
        1267, 4946, 20444, 26811, 39125, 2687, 42893, 41120, 13808, 9804, 14853, 19134, 23392, 21839, 8731, 39837, 13866, 2043, 45665, 2587, 23122,
         37360, 23915, 28958, 30854, 
        16814, 47355, 33791, 28294, 25116, 27301, 25736, 1847, 42538, 28767, 16835, 23194, 38370, 8246, 47635, 27577, 35468, 41988, 
        1940, 1888, 837, 39732, 20062, 47629, 37952, 
        3325, 10706, 27674, 39084, 1545, 40472, 36966, 19711, 13649, 33886, 39351, 27703, 13906, 17487, 33801, 25606, 38440, 24491, 
        31669, 2932, 46534, 40892, 34391, 25558, 47290, 7504, 7258, 38244, 43860, 16669, 32489, 1084, 34379, 26614, 43280, 
        41604, 23883, 9037, 38249, 34274, 16531, 32850, 40826, 40638, 18793, 44416, 36379, 21214, 25641, 43467, 19706, 38167, 
        22788, 82, 1754, 12717, 39883, 10009, 9441, 11434, 13500, 11355, 7511, 27180, 30556, 38016, 21178, 38247, 36499, 27205,
         25253, 11421, 9791, 39431, 33819, 6977, 28720, 3979, 43088, 12629, 42367, 49186, 33068, 46559, 13037, 27904, 39375, 
         21581, 18256, 11115, 13303, 7825, 24052, 16470, 48792, 43220, 20041, 22189, 33164, 153, 31001, 42454, 41396, 48610, 
         19159, 38056, 3109, 32317, 49189, 26808, 5956, 28754, 791, 4052, 22683, 21880, 41821, 11327, 39950, 25480, 44123, 
         24532, 3149, 42072, 36337, 17387, 114, 36312, 42914, 9238, 38394, 19480, 47930, 40134, 15563, 32051, 39608, 11296,
          29751, 11334, 16645, 15569, 42749, 14995, 14085, 37015, 13943, 2013, 32477, 41208, 11214, 38184, 24156, 5555, 33829,
           19603, 38892, 30478, 44219, 11361, 31803, 9793, 11669, 22073, 10964, 2269, 30289, 10436, 26227, 26383, 13968, 6858, 
           24317, 33263, 37450, 12801, 310, 10341, 29094, 29398, 47125, 17498, 40944, 49636, 29781, 33259, 27715, 5506, 43868, 
           37307, 46582, 39774, 18301, 41677, 41363, 11801, 23033, 13516, 18449, 20476, 18100, 10263, 35971, 9164, 23577, 12936,
            15223, 14355, 6263, 15082, 22664, 449, 48282, 2797, 41565, 18807, 42499, 19807, 10363, 11982, 10633, 46580, 21957, 
            35629, 17660, 24958, 18072, 15593, 41843, 40422, 26436, 27159, 4811, 35886, 21751, 26982, 8912, 18278, 41493, 8832, 
            13076, 48334, 20784, 3821, 47490, 46439, 24881, 27756, 16210, 11775, 11614, 15369, 43652, 41756, 45892, 24548, 11875,
             46407, 13868, 43396, 8523, 21414, 47417, 47186, 13709, 31601, 12147, 20545, 12018, 48156, 37533, 26239, 9922, 47871,
              14676, 34560, 19152, 15130, 20655, 41402, 34802, 8025, 32086, 25715, 28586, 2878, 11638, 37778, 29197, 26787, 5463, 
              31945, 17499, 22217, 21504, 43429, 990, 33885, 15135, 28285, 23714, 22547, 42151, 8230, 8409, 8663, 47766, 21112, 
              38122, 20168, 11299, 22294, 563, 45816, 9546, 6989, 783, 29918, 33955, 19850, 38919, 34806, 29923, 28064, 33474,
               24520, 10888, 3199, 10110, 44895, 274, 9386, 34435, 1512, 4454, 34151, 19186, 42312, 23030, 49594, 40291, 45265, 
               48695, 10519, 1506, 40022, 25983, 7764, 14619, 1465, 11966, 38009, 25746, 24132, 39992, 8745, 29679, 43526, 40206, 
               45023, 12210, 2682, 20408, 37051, 44952, 44445, 43426, 31477, 39470, 37266, 44925, 18180, 6195, 19991, 35311, 21736,
                24458, 19908, 36617, 12252, 27677, 30589, 46822, 38202, 9639, 12438, 26640, 14579, 47433, 18999, 42350, 29374, 14631,
                 32077, 21753, 18169, 38684, 10853, 32366, 35152, 900, 5140, 38836, 36036, 16466, 9878, 37810, 47058, 47670, 30390, 
                 24857, 21063, 6502, 47477, 4786, 658, 7951, 666, 3923, 15788, 256, 18230, 9911, 23473, 35942, 29376, 29003, 4787,
                  46696, 2761, 31074, 1892, 16961, 33996, 9864, 19314, 18858, 23905, 18780, 9640, 25569, 30230, 23016, 27723, 16616, 
                  18764, 43269, 39910, 38914, 32381, 14214, 46128, 1448, 39819, 17752, 47572, 36457, 15949, 41864, 40567, 44499, 30449,
                   15376, 29194, 28219, 897, 20180, 29568, 18346, 42540, 10775, 47998, 44379, 46905, 34077, 1152, 30785, 23609, 3027, 
                   15811, 15297, 29521, 47516, 49194, 41633, 28982, 6913, 12279, 48693, 42185, 9080, 39078, 32463, 35271, 44539, 37951, 
                   16358, 481, 40633, 7021, 8572, 12593, 3136, 20239, 14482, 14984, 1829,
   42400, 47968, 47194, 47895, 42758, 37671, 7542, 21188, 29393, 47956, 14549, 31801, 39700, 44802, 13572, 10049, 
   42233, 49589, 16310, 25294, 30290, 39469, 23737, 11482, 2699, 13506, 31187, 41447, 14720, 31805, 596, 5852, 36832, 
   21884, 44504, 2299, 27959, 23738, 30010, 37664, 38196, 35064, 11554, 30694, 8600, 5420, 12802, 2123, 11406, 39687, 
   30559, 9638, 36408, 10343, 30845, 19142, 60, 28674, 30382, 37861, 49131, 11721, 13075, 6365, 25750, 37425, 10891, 
   26490, 49107, 21812, 42261, 16320, 35001, 4469, 5874, 20411, 44842, 21928, 42508, 25124, 18289, 8927, 47750, 11646, 
   1573, 27681, 42048, 14036, 22870, 41713, 6992, 46248, 26276, 14415, 36589, 47226, 25785, 24380, 14554, 47439, 2222, 
   44616, 43272, 49190, 27711, 10902, 15602, 26442, 40322, 3680, 8982, 3759, 22588, 24521, 23191, 16008, 10418, 7276, 
   16842, 38076, 32624, 8617, 30154, 49545, 5481, 21181, 648, 8744, 15760, 15643, 17795, 20906, 38353, 17471, 13219, 
   25415, 13122, 20648, 9275, 37380, 13707, 41612, 30706, 29696, 8738, 11401, 47429, 14463, 11093, 26366, 9941, 37932, 
   8711, 39879, 42556, 38242, 28800, 4674, 35569, 24404, 24362, 6233, 44932, 10230, 31344, 41608, 12925, 4271, 2214, 654, 
   33845, 49282, 40285, 17892, 16135, 44619, 2351, 38729, 44587, 48975, 16343, 9937, 32995, 48590, 5606, 37686, 30955, 42790,
    23643, 37225, 7299, 41615, 19919, 21568, 328, 16571, 13123, 34252, 4413, 45518, 23487, 22498, 27604, 21465, 37762, 11124,
     31755, 42054, 3111, 11726, 46643, 23354, 18405, 19749, 45161, 24991, 32084, 16971, 44325, 3858, 35308, 30087, 22587, 17881, 
     15504, 35095, 24976, 44299, 40314, 39367, 32203, 13091};
  AVLNode *root = NULL;
  for (int i = 0; i < 1000; i++)
    root = insert(root, vals[i]);
  closestPair(root, &a, &b);
  printf("%d\n", a);
  printf("%d\n", b);
  // assert(a == 154);
  // assert(b == 155);
}

/* Add your own testcases here... */

// There will be more test cases here when you are being marked...
// Also, you need to make sure you meet the compelxity bounds! Half
// the marks for this coding section will be for meeting the complexity
// bound and having the right idea for implementation, the other half
// will be for passing all the test-cases.

int main(int argc, char *argv[])
{
  // Call the unit testing framework
  unit_main(argc, argv);
  return 0;
}